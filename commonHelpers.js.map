{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//Отримуємо доступ до елементів\nconst timerEl = document.querySelector('#datetime-picker');\nconst btnEl = document.querySelector('[data-start]');\nconst daysElement = document.querySelector('[data-days]');\nconst hoursElement = document.querySelector('[data-hours]');\nconst minutesElement = document.querySelector('[data-minutes]');\nconst secondsElement = document.querySelector('[data-seconds]');\n\nlet timerInterval = null; // Додамо змінну для збереження ідентифікатора інтервалу\nlet userSelectedDate = null; // Оголошуємо змінну для зберігання обраної дати\n\n//Встановлюємо прослуховувачі подій на елементи\ntimerEl.addEventListener('change', selectedDate);\nbtnEl.addEventListener('click', startTimer);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n  },\n};\n\nflatpickr(timerEl, options); // Ініціалізуємо flatpickr на елементі з параметрами options\n\n//Функція обрання дати користувачем\nfunction selectedDate(event) {\n  const selectedDate = new Date(event.target.value);\n  const now = new Date();\n\n  if (!event.target.value) {\n    showToast('Hey', 'red', 'Please choose a date', 'topCenter');\n    btnEl.disabled = true;\n    return; // Перевірка на пустий ввід\n  }\n\n  if (!isValidDate(selectedDate)) {\n    showToast('Hey', 'red', 'Please choose a valid date', 'topCenter');\n    return; // Перевірка валідності дати\n  }\n\n  if (selectedDate <= now) {\n    btnEl.disabled = true;\n    showToast('Hey', 'red', 'Please choose a date in the future', 'topCenter'); // Перевірка якщо дата обрана в минулому\n  } else {\n    btnEl.disabled = false;\n    userSelectedDate = selectedDate;\n  }\n}\n\n// Функція для перевірки валідності дати\nfunction isValidDate(date) {\n  return !isNaN(date.getTime());\n}\n\n// Функція для виведення повідомлення\nfunction showToast(title, color, message, position) {\n  iziToast.show({\n    title: title,\n    color: color,\n    message: message,\n    position: position,\n  });\n}\n\n// Функція для обчислення часу до події\nfunction calculateTimeDifference(targetDate) {\n  const now = new Date();\n  return targetDate.getTime() - now.getTime();\n}\n\n// Функція запуску старту таймера\nfunction startTimer() {\n  if (!userSelectedDate) {\n    showToast('Hey', 'red', 'Please choose a date first', 'topCenter');\n    return;\n  }\n\n  btnEl.disabled = true; // Деактивуємо кнопку після натискання\n  let timeDiff = calculateTimeDifference(userSelectedDate); // Викликаємо функцію для обчислення різниці у часі\n\n  if (timeDiff <= 0) {\n    clearInterval(timerInterval); // Зупиняємо таймер, якщо обрана дата вже минула\n    return;\n  }\n\n  const { days, hours, minutes, seconds } = convertMs(timeDiff); // Отримуємо значення days, hours, minutes, seconds\n  updateTimerDisplay(days, hours, minutes, seconds); // Оновлюємо відображення таймера\n\n  //Виконуємо зворотній відлік часу, встановлюємо інтервал що запускається кожну секунду\n  timerInterval = setInterval(() => {\n    timeDiff -= 1000; // Віднімаємо одну секунду\n\n    if (timeDiff <= 0) {\n      clearInterval(timerInterval); // Якщо час вийшов, зупиняємо таймер\n      btnEl.disabled = true; // Деактивуємо кнопку\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(timeDiff); // Отримуємо значення days, hours, minutes, seconds\n    updateTimerDisplay(days, hours, minutes, seconds); // Оновлюємо відображення таймера\n  }, 1000);\n}\n\n//Функція для відображення таймера\nfunction updateTimerDisplay(days, hours, minutes, seconds) {\n  daysElement.textContent = addLeadingZero(days);\n  hoursElement.textContent = addLeadingZero(hours);\n  minutesElement.textContent = addLeadingZero(minutes);\n  secondsElement.textContent = addLeadingZero(seconds);\n}\n\nfunction convertMs(ms) {\n  // Кількість мілісекунд на одиницю часу\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Решта днів\n  const days = Math.floor(ms / day);\n  // Решта годин\n  const hours = Math.floor((ms % day) / hour);\n  // Решта хвилин\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Решта секунд\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// Функція для додавання ведучого нуля\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["timerEl","btnEl","daysElement","hoursElement","minutesElement","secondsElement","timerInterval","userSelectedDate","selectedDate","startTimer","options","selectedDates","flatpickr","event","now","showToast","isValidDate","date","title","color","message","position","iziToast","calculateTimeDifference","targetDate","timeDiff","days","hours","minutes","seconds","convertMs","updateTimerDisplay","addLeadingZero","ms","value"],"mappings":"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"}