{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst timerEl = document.querySelector('#datetime-picker');\nlet btnEl = document.querySelector('[data-start]');\nlet timerInterval; // Додамо змінну для збереження ідентифікатора інтервалу\nlet userSelectedDate; // Оголошуємо змінну для зберігання обраної дати\n\ntimerEl.addEventListener('change', selectedDate);\nbtnEl.addEventListener('click', startTimer);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n  },\n};\n\nflatpickr(timerEl, options); // Ініціалізуємо flatpickr на елементі з параметрами options\n\nfunction selectedDate(event) {\n  if (!event.target.value) {\n    return; // Перевірка на пустий ввід\n  }\n  const selectedDate = new Date(event.target.value);\n  const now = new Date();\n\n  if (isNaN(selectedDate.getTime())) {\n    iziToast.show({\n      title: 'Hey',\n      color: 'red',\n      message: 'Please choose a valid date',\n    });\n    return;\n  }\n\n  if (selectedDate <= now) {\n    btnEl.disabled = true;\n    iziToast.show({\n      title: 'Hey',\n      color: 'red',\n      message: 'Please choose a date in the future',\n    });\n  } else {\n    btnEl.disabled = false;\n    userSelectedDate = selectedDate;\n  }\n}\n\nfunction startTimer() {\n  btnEl.disabled = true; // Деактивуємо кнопку після натискання\n  const now = new Date();\n  let timeDiff = userSelectedDate.getTime() - now.getTime(); // Різниця в мілісекундах між поточним часом і обраною датою\n  if (timeDiff <= 0) {\n    clearInterval(timerInterval); // Зупиняємо таймер, якщо обрана дата вже минула\n    return;\n  }\n\n  updateTimerDisplay(timeDiff); // Оновлюємо відображення таймера\n\n  timerInterval = setInterval(() => {\n    timeDiff -= 1000; // Віднімаємо одну секунду\n    if (timeDiff <= 0) {\n      clearInterval(timerInterval); // Якщо час вийшов, зупиняємо таймер\n      btnEl.disabled = true; // Деактивуємо кнопку\n    }\n    updateTimerDisplay(timeDiff); // Оновлюємо відображення таймера\n  }, 1000);\n}\n\nfunction updateTimerDisplay(timeDiff) {\n  const { days, hours, minutes, seconds } = convertMs(timeDiff);\n  const formattedTime = `${addLeadingZero(days)}:${addLeadingZero(\n    hours\n  )}:${addLeadingZero(minutes)}:${addLeadingZero(seconds)}`;\n  timerEl.textContent = formattedTime;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n// Функція для додавання ведучого нуля\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["timerEl","btnEl","timerInterval","userSelectedDate","selectedDate","startTimer","options","selectedDates","flatpickr","event","now","iziToast","timeDiff","updateTimerDisplay","days","hours","minutes","seconds","convertMs","formattedTime","addLeadingZero","ms","value"],"mappings":"2GAQA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACzD,IAAIC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EACAC,EAEJH,EAAQ,iBAAiB,SAAUI,CAAY,EAC/CH,EAAM,iBAAiB,QAASI,CAAU,EAE1C,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,CAC7B,CACH,EAEAC,EAAUR,EAASM,CAAO,EAE1B,SAASF,EAAaK,EAAO,CAC3B,GAAI,CAACA,EAAM,OAAO,MAChB,OAEF,MAAML,EAAe,IAAI,KAAKK,EAAM,OAAO,KAAK,EAC1CC,EAAM,IAAI,KAEhB,GAAI,MAAMN,EAAa,QAAO,CAAE,EAAG,CACjCO,EAAS,KAAK,CACZ,MAAO,MACP,MAAO,MACP,QAAS,4BACf,CAAK,EACD,MACD,CAEGP,GAAgBM,GAClBT,EAAM,SAAW,GACjBU,EAAS,KAAK,CACZ,MAAO,MACP,MAAO,MACP,QAAS,oCACf,CAAK,IAEDV,EAAM,SAAW,GACjBE,EAAmBC,EAEvB,CAEA,SAASC,GAAa,CACpBJ,EAAM,SAAW,GACjB,MAAMS,EAAM,IAAI,KAChB,IAAIE,EAAWT,EAAiB,QAAS,EAAGO,EAAI,QAAO,EACvD,GAAIE,GAAY,EAAG,CACjB,cAAcV,CAAa,EAC3B,MACD,CAEDW,EAAmBD,CAAQ,EAE3BV,EAAgB,YAAY,IAAM,CAChCU,GAAY,IACRA,GAAY,IACd,cAAcV,CAAa,EAC3BD,EAAM,SAAW,IAEnBY,EAAmBD,CAAQ,CAC5B,EAAE,GAAI,CACT,CAEA,SAASC,EAAmBD,EAAU,CACpC,KAAM,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAQ,EACtDO,EAAgB,GAAGC,EAAeN,CAAI,CAAC,IAAIM,EAC/CL,CACJ,CAAG,IAAIK,EAAeJ,CAAO,CAAC,IAAII,EAAeH,CAAO,CAAC,GACvDjB,EAAQ,YAAcmB,CACxB,CAEA,SAASD,EAAUG,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAGA,SAASG,EAAeE,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}